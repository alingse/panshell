(function(d,c){var b=c.require;function a(e){this.conf=e;this.width=e.width;this.height=e.height;this.mask=e.mask;this.titleText=e.titleText;this.content=e.content;this.onRender=e.onRender||function(){};this.num=Math.floor(Math.random()*1000);this.init()}a.prototype.init=function(){if(this.mask){this.createMask()}this.createBody()};a.prototype.createMask=function(){this.maskDom=d('<div class="mod-dialog" id="pass-'+this.num+'"></div>');d("body").append(this.maskDom)};a.prototype.show=function(){if(this.mask){this.maskDom.get(0).style.display="block"}var e=this.domBody.height();this.domBody.css("display","block")};a.prototype.hide=function(){var e=this;if(e.mask){e.maskDom.get(0).style.display="none"}e.domBody.hide()};a.prototype.remove=function(){if(this.mask){this.maskDom.remove()}this.domBody.remove()};a.prototype.createBody=function(){var f,i,e,h=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);this.domBody=d('<div class="mod-dialog-body" id="pass-content'+this.num+'"><div class="mod-dialog-content"><div class="mod-dialog-main"></div></div></div>');d("body").append(this.domBody);this.domBody.css({width:this.width,marginLeft:-(parseInt(this.width))/2+"%"});f=this.domBody.children(".mod-dialog-content");if(this.content){f.children(".mod-dialog-main").append(this.content);e=this.domBody.height();this.domBody.css({top:Math.max((d(window).height()-e)/2,0)+"px"});this.show()}this.bind();var g=this.domBody;d(window).on("resize",function(){g.css({top:Math.max((d(window).height()-e)/2,0)+"px"})});this.onRender(this)};a.prototype.setContent=function(e){this.domBody.append(e);this.show()};a.prototype.bind=function(){var e=this;d("#close-"+e.num).on("click",function(f){e.hide();f.preventDefault()})};c.define("ui/dialog",a)})($,window.Pass);(function(b,a){if(!a.timerId){a.timerId=1}a.connectURL={nuomi:"http://m.nuomi.com/webapp/user/bindcheck"};a.loginConnect=function(f,j,e){var g=this,f=f||{},d=++a.timerId;var k=function(o){if(typeof(o)=="object"){var l=[];for(var q in o){var n=o[q];if(n!==undefined&&n!==null){if(l.length){l.push("&")}var m=encodeURIComponent(typeof(n)=="boolean"?(n?"1":"0"):n.toString());l.push(encodeURIComponent(q),"=",m)}}return l.join("")}if(typeof(o)=="string"){return o}return null};var i=function(l,n){n=k(n);if(typeof(n)=="string"){var m=(/\?/g).test(l);l+=(m?"&":"?")+k(n)}return l};var h=a.connectURL[publicData.tpl],c=i(h,f);c=c+(c.indexOf("?")>0?"&":"?")+"callback=?";b.getJSON(c,function(l){clearTimeout(a["loginConnectTimer"+d]);if(l.errInfo.no==0){var m=l.data.adtext?"&adtext="+encodeURIComponent(l.data.adtext):"";location.href="/wp/unitewidget?token="+l.data.token+m+"&"+publicVar;j&&j.success&&j.success(l)}else{if(l.errInfo.no==2){j&&j.fail&&j.fail(l)}else{e&&e()}}});a["loginConnectTimer"+d]=setTimeout(function(){e&&e()},15000)}})($,window.Pass);(function(d,c){var a=c.require;function b(e){this.conf=e;this.vcodestr=e.vcodestr;this.content=e.content;this.getUrl=e.getUrl;this.module=e.module;this.adapter=e.adapter||"";this.vcodeHide=e.vcodeHide||"hide";this.onRender=e.onRender||function(){};this.callback=e.callback||function(){};this.init()}b.prototype.init=function(){this.createBody();this._setEvent()};b.prototype.show=function(){this.domBody.show()};b.prototype.hide=function(){this.domBody.hide()};b.prototype.remove=function(){this.domBody.remove()};b.prototype.createBody=function(){var f,i,e;this.domBody=d('<div class="mod-vcode"></div>');d("body").append(this.domBody);if(this.adapter!="1"&&this.adapter!="3"&&this.adapter!="app"){var h='<div class="pass-header"><a class="pass-header-back" id="vcode-goBack"></a><span class="pass-header-title">验证码</span></div>';this.domBody.append(h)}if(this.content){this.domBody.append(this.content);this.show()}else{var g='<div class="mod-vcode-content"><p class="error_area" id="error"></p><p class="vcodeTip">为了您的帐号安全，请填写图中的字符</p><img class="verifypage-vcode verifyCode-img" src="'+apiDomain+"/cgi-bin/genimage?"+this.vcodestr+"&v="+new Date().getTime()+'" id="verifyImgSrc" width="100" height="40"><p class="form-item form-input-mobile"><span class="form-input-wrapper vcode-span"><label class="text-label text-label-verifyCode">验证码</label><input type="text" name="dialogVerifyCode" class="text-input" value="" placeholder="请输入验证码" autocomplete="off" maxlength="6" id="vcode-dialogVerifyCode"><span class="input-clearValue" id="vcode-clear"></span></span></p><p class="form-item form-item-btn"><input id="vcode-submit" type="submit" value="确定" class="pass-button-full pass-button-full-disabled"></p><p class="pass-mod-loadingWrap" id="vcode-loading"><span class="pass-mod-loadingImg"></span>正在加载...</p></div>';this.domBody.append(g);this.show()}this.onRender(this)};b.prototype._setEvent=function(){var e=this;d("#vcode-submit").click(function(){var g=d("#vcode-dialogVerifyCode").val();if(g){d("#vcode-loading").show();var f={verifycode:g,codestring:e.vcodestr};d.ajax({url:e.getUrl,data:f,type:"GET",dataType:"json",success:function(h){d("#vcode-loading").hide();if(h.errInfo.no==0){d("#"+e.module+"-dialogVerifyCode").val(g);if(e.vcodeHide=="hide"){e.hide()}e.callback()}else{e._validateError(h.errInfo.msg)}d("#vcode-submit").val("确定")}})}else{e._validateError("请填写验证码")}});d("#vcode-dialogVerifyCode").on("keyup",function(){if(d("#vcode-dialogVerifyCode").val()){d("#vcode-submit").removeClass("pass-button-full-disabled")}else{d("#vcode-submit").addClass("pass-button-full-disabled")}});d("#verifyImgSrc").on("click",function(){d("#verifyImgSrc").attr("src",apiDomain+"/cgi-bin/genimage?"+e.vcodestr+"&v="+new Date().getTime())});d("#vcode-goBack").click(function(){location.reload()});c.view.clearInputValueBtn(d("#vcode-clear").prev(),d("#vcode-clear"));d("#vcode-clear").on("tap",function(){d("#vcode-submit").addClass("pass-button-full-disabled")})};b.prototype._validateError=function(g){var f=this,e=d("#error");e.html(g).show();c.view.clearDialogMsg(e)};b.prototype.setContent=function(e){this.vcodestr=e;d("#verifyImgSrc").attr("src",apiDomain+"/cgi-bin/genimage?"+this.vcodestr+"&v="+new Date().getTime());d("#vcode-dialogVerifyCode").val("");this.show()};b.prototype.setCallback=function(e){this.callback=e};c.define("ui/vcode",b)})($,window.Pass);(function(g,d){var b=d.require,c,a={module:"login",histroyRecordList:histroyRecordList,serverTimeCount:0,rsa:"B3C61EBBA4659C4CE3639287EE871F1F48F7930EA977991C7AFE3CC442FEA49643212E7D570C853F368065CC57A2014666DA8AE7D493FD47D171C0D894EEE3ED7F99F6798B7FFD7B5873227038AD23E3197631A8CB642213B9F27D4901AB0D92BFA27542AE890855396ED92775255C977F5C302F1E7ED4B1E369C12CB6B1822F",error:{field:""},countrycode:"",stageCurrent:"home",adapter:adapter};a=g.extend(a,d.validator,d.view);var f=null;var e=null;var h=null;a=g.extend(a,{lang:{"zh-CN":{username:"帐号",password:"密码",verifycode:"验证码",networkNoText:"网络连接失败，请检查您的网络设置并稍后再试。",loginClientToWapText:"您拒绝了此次登录",submitText:document.getElementById(a.module+"-submit").value}}["zh-CN"],getElement:function(i){return document.getElementById(this.module+"-"+i)},render:function(){var i=this;i.loginWapCounter=1;i._setEvent();i._setValidator();i._suggestion();i._fastLogin();d.view.inputBlur()},_setEvent:function(){var j=this;var i=function(k){j._eventHandler.entrance.apply(j,[k])};if(j.histroyRecordList.length>0){j.getElement("username").value=j.histroyRecordList[0];j._getUserImg(j.histroyRecordList[0])}g(".text-input",j.getElement("formWrapper")).on({focus:i,blur:i,change:i,keyup:i});g(".input-clearValue",j.getElement("formWrapper")).each(function(m,l){var l=g(this);j.clearInputValueBtn(l.prev(),l,j)});g(".form-item input",j.getElement("formWrapper")).each(function(m,l){g(l).on("paste",function(){j.setSubmitStyle(j)})});g(j.getElement("submit")).on("tap",function(){j.setSubmitStyle(j)});g(".input-clearValue").on("tap",function(){if(g(this).prev().attr("name")=="username"){if(j.getElement("username-suggest")){g(j.getElement("username-suggest")).hide();g(j.getElement("userlist")).addClass("pass-input-userlist").removeClass("pass-input-down-userlist")}j._getLogoImg()}});g("input").on("keyup",function(){if(g(this).attr("name")=="username"&&g(this).val()==""){j._getLogoImg()}});g(window).on("resize",function(){j._hideDown()});g(j.getElement("formWrapper")).on("submit",i);g(j.getElement("pwdToggle")).on("tap",i);g(j.getElement("verifyCodeChange")).on("tap",i);j.fullButton(g(j.getElement("submit")));if(d.log){d.log.logEffective({keydown:g(".text-input",j.getElement("formWrapper")),tap:g(j.getElement("submit"))},"wapLogin")}g(".text-label-code").on("tap",function(k){g("input").blur();if(g(".codelist").length){g(".codelist").show();g("#codeSearch input").val("");g("#codelist-code-ul li").css("display","block");k.stopPropagation()}else{var l=new Pass.ui.codelist({container:"pageWrapper"})}});g("body").on("tap","#codelist-code-ul li",function(){var k=g(this).find(".right").html();g(".text-label-code").html(k);g(".codelist").hide();j.countrycode=g(this).attr("data-country");j._setValidator();var l=j.getElement("username");l.focus();g.getJSON(apiDomain+"/wp/api/login/check?gid="+(d.guideRandom||"")+"&tt="+new Date().getTime(),{username:d.view._strTrim(d.view._SBCtoDBC(l.value)),countrycode:j.countrycode},function(m){if(m.data.codeString){j.getVerifyCode(m.data.codeString)}},"json")});if(g(".text-label-code").html()){j.stageCurrent="overseas"}else{j.stageCurrent="home"}},_hideDown:function(){var i=document.body.scrollHeight;if(i<450){g(".account-login").hide()}else{g(".account-login").show()}},_fastLogin:function(){if(!document.getElementById("login-type")){return}var i=g(".mod-fast-login li").length;function j(){var l=g(document).width()-20;if(l/i>=100){g(".mod-fast-login li").width(l/i)}else{var m=Math.floor(l/100),k=Math.floor(100/m);g(".mod-fast-login li").width(k+"%")}}j();g(".other-login-type").fadeIn();g(window).on("orientationchange",function(){j()})},_validateError:function(j){var k=this,i=g("#error");g("#error").html(j.msg).show();d.view.clearDialogMsg(i);k.setSubmitStyle(k);if(j.field){k.error.field=j.field}else{k.error.field=""}},_validateSuccess:function(j){var k=this,i=g("#error");if(j.msg){g("#error").html(j.msg).show();d.view.clearDialogMsg(i)}else{if(j.field==k.error.field){i.html("");k.error.field=""}}},_setValidator:function(){var i=this;if(i.stageCurrent=="overseas"){i.validateRules={username:{rules:i.countrycode?["required","numformat"]:["required","phone"],desc:i.lang.username},password:{rules:["required"],desc:i.lang.password},verifycode:{rules:["required"],desc:i.lang.verifycode}}}else{i.validateRules={username:{rules:["required"],desc:i.lang.username},password:{rules:["required"],desc:i.lang.password},verifycode:{rules:["required"],desc:i.lang.verifycode}}}i._validator.init(i,i.validateRules)},sureAccountType:function(){var j=this;if(c){c.show()}else{var i='<div class="page-dialog-content"><p>亲爱的用户:</p><p>为了确保您的帐号安全，请先确认您输入的帐号是用户名还是手机号</p></div><div class="dialog-content-btn tcenter"><input type="button" value="手机号" class="pass-button-auto pass-button-suer" id="account-type-phone"><input type="button" value="用户名" class="pass-button-auto pass-button-not" id="account-type-username"></div>';c=new Pass.ui.dialog({width:"80%",mask:true,content:i});g("#account-type-phone").on("click",function(){j.getElement("loginmerge").value=0;j.getElement("isphone").value=1;c.hide();g(j.getElement("formWrapper")).submit()});g("#account-type-username").on("click",function(){j.getElement("loginmerge").value=0;j.getElement("isphone").value=0;c.hide();g(j.getElement("formWrapper")).submit()});g("#account-type-phone,#account-type-username").each(function(){d.view.touch(g(this),"pass-button-auto-active")})}},_suggestion:function(){var m=this,i=["163.com","qq.com","gmail.com","sohu.com","126.com","sina.com","hotmail.com","139.com"],l=/^([a-zA-Z0-9_.\-+]+)@(.*)$/,n=g(m.getElement("username")),q='<ul class="input-suggest form-input-sugguest" id="login-username-suggest"></ul>';function j(z){var w="",x=m.histroyRecordList;if(g(this).val()==""){if(m.getElement("username-suggest")){g(m.getElement("username-suggest")).hide();g(document).off("click",p);g(m.getElement("userlist")).addClass("pass-input-userlist").removeClass("pass-input-down-userlist")}return}if(x.length>0){g.each(x,function(C,B){if(B.indexOf(n.val())==0){if(B!=n.val()){w+='<li data="'+B+'">'+B+'<span class="remove-item"></span></li>'}}})}var A=l.exec(n.val()),y=n.val();if(!!A){if(w){var t=w.match(/@['.',\w]*/);for(var s=0;s<i.length;s++){for(var r=0;r<t.length;r++){t[r]=t[r].replace(/@/,"");if(i[s]==t[r]){i.splice(s,1)}}}}if(!A[2]){w+="<li>"+y+i.join("</li><li>"+y)+"</li>"}else{for(var s=0,u=i.length;s<u;s++){if(i[s].indexOf(A[2])==0){if(i[s]!=A[2]){w+="<li>"+A[1]+"@"+i[s]+"</li>"}}}}}i=["163.com","qq.com","gmail.com","sohu.com","126.com","sina.com","hotmail.com","139.com"];if(w==""){g(m.getElement("username-suggest")).hide();g(document).off("click",p);g(m.getElement("userlist")).addClass("pass-input-userlist").removeClass("pass-input-down-userlist")}else{if(!m.getElement("username-suggest")){n.parent().append(q);g(m.getElement("username-suggest")).on("click",o)}var v=m.getElement("username-suggest");g(v).html(w);if(g(v).is(":hidden")){g(v).show()}g(m.getElement("userlist")).removeClass("pass-input-userlist").addClass("pass-input-down-userlist");g(document).on("click",p)}}function k(){var t="",s=m.histroyRecordList;if(s.length==0){return}if(s.length>0){g.each(s,function(v,u){t+='<li data="'+u+'">'+u+'<span class="remove-item"></span></li>'})}if(!m.getElement("username-suggest")){n.parent().append(q);g(m.getElement("username-suggest")).on("click",o)}var r=m.getElement("username-suggest");g(r).html(t);if(g(r).is(":hidden")){g(r).show()}g(m.getElement("userlist")).removeClass("pass-input-userlist").addClass("pass-input-down-userlist");g(document).on("click",p)}function o(r){var t=r.target,s=m.histroyRecordList;if(t.tagName.toLowerCase()=="li"){var u=g(t).attr("data")?g(t).attr("data"):g(t).html();n.val(u);g(m.getElement("password")).focus();g(m.getElement("username-suggest")).hide();g(document).off("click",p);g(m.getElement("userlist")).addClass("pass-input-userlist").removeClass("pass-input-down-userlist");m.checkUsername(u);m._getUserImg(u)}else{if(t.className.indexOf("remove-item")>-1){var u=g(t).parent().attr("data"),v=g.inArray(u,s);s.splice(v,1);g(t).parent().remove();g.getJSON(apiDomain+"/wp/api/login/history?item="+u+"&tpl="+publicData.tpl+"&v="+new Date().getTime(),{},function(w){},"json");if(m.getElement("username-suggest").getElementsByTagName("li").length==0){g(m.getElement("username-suggest")).hide();g(document).off("click",p);g(m.getElement("userlist")).addClass("pass-input-userlist").removeClass("pass-input-down-userlist")}}}}n.on({focus:j,keyup:j});g(m.getElement("userlist")).on("click",function(){if(!m.getElement("username-suggest")||g(m.getElement("username-suggest")).is(":hidden")){k()}else{g(m.getElement("username-suggest")).hide();g(document).off("click",p);g(m.getElement("userlist")).addClass("pass-input-userlist").removeClass("pass-input-down-userlist")}});var p=function(r){if(!g(event.target).closest("#login-username-suggest").size()&&!g(event.target).closest("#login-username").size()&&!g(event.target).closest("#login-userlist").size()){g(m.getElement("username-suggest")).hide();g(document).off("click",p);g(m.getElement("userlist")).addClass("pass-input-userlist").removeClass("pass-input-down-userlist")}}},_getUserImg:function(j){var i=this;g(".logo-dom").hide();g(".user-img img").attr("src","http://himg.baidu.com/sys/portrait/item/"+(foreignmobile?i.countrycode:"")+d.view._SBCtoDBC(j)+"?isuname=1&tt="+new Date().getTime()).parent().show()},_getLogoImg:function(j){var i=this;g(".user-img").hide();g(".logo-dom").show()},getVerifyCode:function(i){var k=this;k.getElement("verifyCodeChange").parentNode.style.display="";if(i&&i.length){g(k.getElement("verifyCodeImg")).attr("src",apiDomain+"/cgi-bin/genimage?"+i+"&v="+new Date().getTime());k.getElement("vcodestr").value=i}else{var j=g(k.getElement("verifyCodeImg")),l=j.attr("src").split("&")[0];j.attr("src",l+"&v="+new Date().getTime())}g(k.getElement("verifycode")).val("");k.setSubmitStyle(k)},clearVerifyCode:function(){var i=this;i.getElement("verifyCodeChange").parentNode.style.display="none";i.getElement("vcodestr").value=""},checkUsername:function(j){var i=this;g.getJSON(apiDomain+"/wp/api/login/check?gid="+(d.guideRandom||"")+"&tt="+new Date().getTime(),{username:d.view._strTrim(d.view._SBCtoDBC(j)),countrycode:i.countrycode,clientfrom:"wap",sub_source:"leadsetpwd"},function(k){if(k.errInfo.no==0&&k.data.userid){var m=k.data.userid;var l=k.data.phone;g.ajax({url:"/wp/api/login/sms?tt="+new Date().getTime(),data:{username:m,gid:(d.guideRandom||""),isuserid:"1",vcodesign:g("#smslogin-vcodesign").val(),vcodestr:g("#smslogin-vcodestr").val(),dialogVerifyCode:i.getElement("dialogVerifyCode").value,clientfrom:"wap",sub_source:"leadsetpwd"},type:"POST",dataType:"json",success:function(n){if(n.errInfo.no==0){g("#smslogin-vcodesign").val("");g("#smslogin-vcodestr").val("");i.getElement("dialogVerifyCode").value="";document.location.href=apiDomain+"?sms=1&"+publicVar+"&smsloginPage=smsvcode&checkPhone="+l+"&isreg=1&isuserid=1&userid="+m+"&sub_source=leadsetpwd"}else{if(n.errInfo.no==50020||n.errInfo.no==50021){g("#smslogin-vcodestr").val(n.data.vcodestr);g("#smslogin-vcodesign").val(n.data.vcodesign);if(h){h.setContent(n.data.vcodestr);h.setCallback(function(){g.ajax({url:"/wp/api/login/sms?tt="+new Date().getTime(),data:{username:m,gid:(d.guideRandom||""),isuserid:"1",vcodesign:g("#smslogin-vcodesign").val(),vcodestr:g("#smslogin-vcodestr").val(),dialogVerifyCode:i.getElement("dialogVerifyCode").value,clientfrom:"wap",sub_source:"leadsetpwd"},type:"POST",dataType:"json",success:function(o){g(i.getElement("loading")).hide();if(o.errInfo.no==0){g("#smslogin-vcodestr").val("");g("#smslogin-vcodesign").val("");i.getElement("dialogVerifyCode").value="";document.location.href=apiDomain+"?sms=1&"+publicVar+"&isreg=1&smsloginPage=smsvcode&checkPhone="+l+"&isuserid=1&userid="+m+"&sub_source=leadsetpwd"}else{h.hide();i._validateError({msg:o.errInfo.msg})}}})})}else{h=new Pass.ui.vcode({getUrl:"/wp/api/security/checkvcode",vcodestr:n.data.vcodestr,module:"login",adapter:i.adapter,vcodeHide:"show",callback:function(){g.ajax({url:"/wp/api/login/sms?tt="+new Date().getTime(),data:{username:m,gid:(d.guideRandom||""),isuserid:"1",vcodesign:g("#smslogin-vcodesign").val(),vcodestr:g("#smslogin-vcodestr").val(),dialogVerifyCode:i.getElement("dialogVerifyCode").value,clientfrom:"wap",sub_source:"leadsetpwd"},type:"POST",dataType:"json",success:function(o){g(i.getElement("loading")).hide();if(o.errInfo.no==0){g("#smslogin-vcodestr").val("");g("#smslogin-vcodesign").val("");i.getElement("dialogVerifyCode").value="";document.location.href=apiDomain+"?sms=1&"+publicVar+"&isreg=1&smsloginPage=smsvcode&checkPhone="+l+"&isuserid=1&userid="+m+"&sub_source=leadsetpwd"}else{h.hide();i._validateError({msg:o.errInfo.msg})}}})}})}}}}})}else{if(k.data.codeString){i.getVerifyCode(k.data.codeString)}}},"json")},_eventHandler:(function(){var j=this,i={focus:function(m,l){if(m!="verifycode"){j.labelFocus(j,m)}j.setSubmitStyle(j)},blur:function(m,l){if(m!="verifycode"){j.labelBlur(j,m)}},keyup:function(m,l){j.setSubmitStyle(j)}},k={change:{username:function(m,l){var n=j.getElement("username").value;j.validate(m,{success:function(){j.checkUsername(n);j._getUserImg(n)}});j.getElement("loginmerge").value=1;j.getElement("isphone").value=0}},tap:{verifyCodeChange:function(m,l){j.getVerifyCode();l.preventDefault()},pwdToggle:function(n,m){var l=g(j.getElement("password"));if(l.attr("type")=="text"){l.attr("type","password");g(j.getElement(n)).removeClass("input-pwdToggle-show")}else{l.attr("type","text");g(j.getElement(n)).addClass("input-pwdToggle-show")}j.getElement("password").focus()}},submit:function(n){var m=j.getElement("submit"),l=g(j.getElement("password"));n.preventDefault();j.setSubmitStyle(j);if(m.disabled){return}if(l.attr("type")=="text"){l.attr("type","password");g(j.getElement("pwdToggle")).removeClass("input-pwdToggle-show")}j.validateAll({success:function(){g(j.getElement("loading")).show();j.getElement("submit").focus();var r=g(j.getElement("formWrapper")).formJson();m.disabled=true;r.countrycode=j.countrycode;r.username=d.view._strTrim(d.view._SBCtoDBC(r.username));r.mobilenum=d.view._strTrim(d.view._SBCtoDBC(r.mobilenum));r.verifycode=d.view._strTrim(r.verifycode);try{if(d.serverTime){r.password=d.view._SBCtoDBC(r.password)+d.serverTime;r.servertime=d.serverTime}setMaxDigits(131);var p=new RSAKeyPair("10001","",j.rsa);r.password=encryptedString(p,r.password)}catch(q){}r.gid=(d.guideRandom||"");function o(){r.logLoginType="wap_loginTouch";var s=new Date().getTime();g.post(apiDomain+"/wp/api/login?tt="+new Date().getTime(),r,function(w){g(j.getElement("loading")).hide();var x=new Date().getTime()-s;if(d.log){d.log.logAjax("loginSubmit",x)}m.disabled=false;clearTimeout(j.submitTimer);if(w.errInfo.no==0){var v=new Image();v.onerror=v.onload=function(){v=null};v.src="https://passport.baidu.com/img/v.gif?v=66134274.gif?type=LoginSuccessAjaxLog&tt="+new Date().getTime();document.location.replace(w.data.u)}else{d.getSeverTime();if(g.inArray(w.errInfo.no,["400101","400023","400032","400034","120016","400024","400408"])>-1){document.location=w.data.gotoUrl}else{if(w.errInfo.no==400401){j.sureAccountType()}else{if(w.errInfo.no==50018&&j.serverTimeCount<=2){++j.serverTimeCount;k[n.type].apply(g(n.target),[n]);return}else{if(w.errInfo.msg.indexOf("系统繁忙")>-1||g.inArray(w.errInfo.no,["500004","400012","50000"])>-1){if(f){g("#errnomsg").html(w.errInfo.msg);g("#questionBack-ok-btn").html("问题反馈").attr("href",apiDomain+"/wp/feedback?errno="+w.errInfo.no+"&"+publicVar);f.show()}else{var u='<div class="page-dialog-content"><p id="errnomsg">'+w.errInfo.msg+'</p></div><div class="dialog-content-btn tcenter"><input type="button" value="取消" class="pass-dialog-btnleft" id="questionBack-cancel-btn"><a class="pass-dialog-btnright" id="questionBack-ok-btn" href="'+apiDomain+"/wp/feedback?errno="+w.errInfo.no+"&"+publicVar+'">问题反馈</a></div>';f=new Pass.ui.dialog({width:"70%",mask:true,content:u});g("#questionBack-cancel-btn").live("click",function(){f.hide()})}}else{if(g.inArray(w.errInfo.no,["400010","400038"])>-1){if(e){e.show()}else{var u='<div class="page-dialog-content"><p>帐号或密码有误，可以尝试通过短信验证登录</p></div><div class="dialog-content-btn tcenter"><input type="button" value="取消" class="pass-dialog-btnleft" id="smsLoginBack-cancel-btn"><a class="pass-dialog-btnright" id="smsLoginBack-ok-btn">短信验证登录</a></div>';e=new Pass.ui.dialog({width:"70%",mask:true,content:u});g("#smsLoginBack-cancel-btn").live("click",function(){e.hide()});g("#smsLoginBack-ok-btn").live("click",function(){if(w.data.userid){g(j.getElement("loading")).show();var z=w.data.userid;var y=w.data.phone;g.ajax({url:"/wp/api/login/sms?tt="+new Date().getTime(),data:{username:z,gid:(d.guideRandom||""),isuserid:"1",vcodesign:g("#smslogin-vcodesign").val(),vcodestr:g("#smslogin-vcodestr").val(),dialogVerifyCode:j.getElement("dialogVerifyCode").value},type:"POST",dataType:"json",success:function(A){g(j.getElement("loading")).hide();if(A.errInfo.no==0){document.location.href=apiDomain+"?sms=1&"+publicVar+"&smsloginPage=smsvcode&checkPhone="+y+"&isreg=1&isuserid=1&userid="+z}else{if(A.errInfo.no==50020||A.errInfo.no==50021){g("#smslogin-vcodestr").val(A.data.vcodestr);g("#smslogin-vcodesign").val(A.data.vcodesign);if(h){h.setContent(A.data.vcodestr);h.setCallback(function(){g("#smsLoginBack-ok-btn").click()})}else{h=new Pass.ui.vcode({getUrl:"/wp/api/security/checkvcode",vcodestr:A.data.vcodestr,module:"login",adapter:j.adapter,vcodeHide:"show",callback:function(){g("#smsLoginBack-ok-btn").click()}})}}else{if(h){h.hide()}j._validateError({msg:A.errInfo.msg})}}}})}else{document.location.replace(apiDomain+"/passport/login?sms=1&"+publicVar)}e.hide()})}}else{if(g.inArray(w.errInfo.no,["900001"])>-1){if(f){g("#errnomsg").html(w.errInfo.msg+",如何开启？");g("#questionBack-ok-btn").html("如何开启").attr("href",apiDomain+"/wp/feedback?errno="+w.errInfo.no+"&"+publicVar+"#faq5");f.show()}else{var u='<div class="page-dialog-content"><p id="errnomsg">'+w.errInfo.msg+',如何开启？</p></div><div class="dialog-content-btn tcenter"><input type="button" value="取消" class="pass-dialog-btnleft" id="questionBack-cancel-btn"><a class="pass-dialog-btnright" id="questionBack-ok-btn" href="'+apiDomain+"/wp/feedback?errno="+w.errInfo.no+"&"+publicVar+'#faq5">如何开启</a></div>';f=new Pass.ui.dialog({width:"70%",mask:true,content:u});g("#questionBack-cancel-btn").live("click",function(){f.hide()})}}else{j._validateError({msg:w.errInfo.msg})}}}}}}if(w.data.codeString){j.getVerifyCode(w.data.codeString)}if(g.inArray(w.errInfo.no,["230048","400010","400010"])>-1){j.getElement("username").focus();j.getElement("verifycode").value=""}else{if(g.inArray(w.errInfo.no,["400011","400015"])>-1){var t=g(j.getElement("password"));t.attr("type","text").focus();g(j.getElement("pwdToggle")).addClass("input-pwdToggle-show");j.getElement("verifycode").value=""}else{if(g.inArray(w.errInfo.no,["310006","500002","500001"])>-1){j.getElement("verifycode").value="";j.getElement("verifycode").focus()}}}}m.value=j.lang.submitText},"json");j.submitTimer=setTimeout(function(){g(j.getElement("loading")).hide();m.disabled=false;m.value=j.lang.submitText;j._validateError({msg:j.lang.networkNoText});d.getSeverTime()},15000)}o()}},true)}};return{entrance:function(o){j=this;var n=g(o.target),m=o.target.name;if(!m&&o.target.id){var l=o.target.id.match(/login-(.*)$/);if(l){m=l[1]}}if(!m){return}if(i.hasOwnProperty(o.type)){i[o.type].apply(g(o.target),[m,o])}if(k.hasOwnProperty(o.type)){if(typeof k[o.type]=="function"){k[o.type].apply(g(o.target),[o])}if(k[o.type].hasOwnProperty(m)){k[o.type][m].apply(g(o.target),[m,o])}}}}})()});a.render();d.define("login",a);if(d.log){d.log.logPv("login")}})($,window.Pass);(function(d,c){var b=c.require;function a(e){this.parentNode=e.container;this.init()}a.prototype.init=function(){d("#"+this.parentNode).append('<div class="codelist"><header class="pass-header"><a class="pass-header-back" id="codeBack"></a><span class="pass-header-title"><span class="pass_header_title">选择国家和地区</span></span></header><div class="code-content"><div class="code-search" id="codeSearch"><input placeholder="搜索"/><img src="/static/touch/img/search_fae386f9.png" height="23"/></div><ul id="codelist-code-ul"></ul></div></div>');this._getcodelist();this._setEvent()};a.prototype._setEvent=function(){var f=this;var e=d("#codelist-code-ul");d("#codeSearch input").on("focus",function(){var g=this;f.timer=setInterval(function(){var h=d(g).val();d.each(d(e).children(),function(){var i=d(this).find(".left").html();if(i.indexOf(h)==-1){d(this).css("display","none")}else{d(this).css("display","block")}})},50);d(this).parent().addClass("code-search-focus")}).on("blur",function(){clearInterval(f.timer);d(this).parent().removeClass("code-search-focus")});d("#codeBack").on("tap",function(){d(".codelist").hide()})};a.prototype._getcodelist=function(){var e='<li data-country=""><span class="left">中国</span><span class="right font-code">+86</span></li>';d.getJSON("https://passport.baidu.com/v2/?securitygetcountrycode&callback=?",{},function(g){if(!g.errInfo["no"]){d.each(g.data["country"],function(j,h){e+="<li data-country="+h.code+'><span class="left">'+h.name+'</span><span class="right font-code">+'+h.code.substring(2)+"</span></li>"});var f=d("#codelist-code-ul");d(f).html(e)}},"json")};c.define("ui/codelist",a)})($,window.Pass);